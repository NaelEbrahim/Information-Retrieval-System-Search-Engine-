{% extends 'base.html' %}

{% block content %}
<h2>Results for "{{ query }}"</h2>
<div>
    {% if dataset %}
    <span>Dataset: <b>{{ dataset }}</b></span>
    {% endif %}
    {% if model_type %}
    <span>, Model: <b>{{ model_type }}</b></span>
    {% endif %}
    <span>, <b>{{ results|length }}</b> results</span>
</div>
    
{% if results %}
    {% for r in results %}
        <div class="result">
            <a href="/document/{{ r.doc_id }}?dataset={{ dataset }}"><h3>{{ r.doc_id }} <small>(score: {{ r.score }})</small></h3></a>
            {% if r.text|length > 300 %}
            <p>{{ r.text[:300] }}...</p>
            {% else %}
            <p>{{ r.text }}</p>
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>No results found.</p>
{% endif %}
<a href="{{ url_for('index', dataset=dataset, model_type=model_type, query=query) }}">Back to search</a>
{% endblock %}
